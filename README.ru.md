# UnionHelperBot
 
 Этот репозиторий создан как нулевой пример классического чат-бота, который позволит использовать возможности 
 YandexCloud API. Базовая идея состоит в том, чтобы помочь программисту создать на основе RAG систему для поиска информации в документах.
 
 Здесь используются следующие технологии: ***YandexGPTAPI***, Redis и ChromaDB.

 Если хотите проверить работоспособность чат-бота, то переходите по ссылки ниже.
 (Иногда он будет работать - это тестовый бот):
> https://t.me/HelperUnionBot
 
 - Чтобы начать разговор просто напишите /start or /начать.
 - Если хотите что-либо узнать, то напишите свой конкретный вопрос и чат-бот даст вам ответ.


 ### Кто пользуется примером реализации данного чат-бота?

 Данный чат-бот используется первичной профсоюзной организацией на одном из предпрятий.
 
 ### Как начать?

**Для тех кто хочет проверить его работу или что-то изменить**

``Эта инструкция будет полезна если выхотите тестировать telegram API.``
   1. Необходимо определить API секреты чат-бота Telegram и YandexAPI в **.env** файле! Также вам необходимо загрузить данные в свою таблицу COLLECTION_NAME базы данных chromadb.
   2. `` git clone https://github.com/GishB/GeneralPurposeTelegramBOT ``
   3. `` pip install -e .``
   4. `` sudo docker run -d -p 6379:6379 redis/redis-stack:latest``
   5. `` sudo docker run -v ./chroma-data:/data -p 32000:8000 -d chromadb/chroma`` 
   6. `` cd ./src/UnionChatBot``
   7. `` python3 main.py``

**Настройка Docker Compose**

``Эта инструкция полезна если вы хотите поднять собственного чат-бота и сразу использовать.``

Минимальные требования (можно самостоятельно изменить в файле):
 - 3 CPU
 - 6 GB

1. Необходимо создать API секреты к сервисному аккаунту YandexAPI в **.env.prod** файле! Также вам необходимо загрузить данные в свою таблицу COLLECTION_NAME базы данных chromadb.


2. Просто пишем команду для поднятия образов.
```commandline
 sudo docker compose up -d
```

3. Теперь можем тестировать работу!
```commandline
curl -X 'POST' \
  'http://127.0.0.1:8000/chat' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "query": "Привет! Как дела? Какие последние новости ты знаешь о профсоюзной жизни",
  "user_id": "0",
  "request_id": "md5hash"
}'
```


Если захотите изменить промт по умолчанию, то у вас имеется две возможности.

1. Передайте в POST запросе свой собственный prompt.

2. Измените файл с prompt по умолчанию через .env.prod

3. Измените информацию в файле с prompt по умолчанию.
(Однако, тут будет проблема так как вам необходимо будет сделать пересборку с самого начала)